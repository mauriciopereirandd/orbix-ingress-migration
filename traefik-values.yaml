# traefik-values.yaml
image:
  tag: "v3.2"

# Configuração do deployment
deployment:
  enabled: true
  replicas: 2
  
# Portas padrão (não precisa customizar)
ports:
  web:
    port: 8000
    exposedPort: 80
    protocol: TCP
  websecure:
    port: 8443
    exposedPort: 443
    protocol: TCP
    tls:
      enabled: true
  metrics:
    port: 9100
    expose:
      default: true
    protocol: TCP

# Providers - habilitando múltiplos
providers:
  # Ingress padrão do Kubernetes (para compatibilidade)
  kubernetesIngress:
    enabled: true
    publishedService:
      enabled: true
  # IngressRoute do Traefik (recomendado para uso principal)
  kubernetesCRD:
    enabled: true
    allowCrossNamespace: true
    allowExternalNameServices: true
  # Gateway API (experimental - habilite quando quiser testar)
  # kubernetesGateway:
  #   enabled: true

# Service configuration
service:
  enabled: true
  type: LoadBalancer
  annotations:
    service.beta.kubernetes.io/azure-load-balancer-internal: "false"

# Logs
logs:
  general:
    level: INFO
  access:
    enabled: true

# Métricas
metrics:
  prometheus:
    enabled: true
    entryPoint: metrics

# Dashboard
ingressRoute:
  dashboard:
    enabled: false

# Resources
resources:
  requests:
    cpu: "100m"
    memory: "128Mi"
  limits:
    cpu: "1000m"
    memory: "512Mi"

# PDB
podDisruptionBudget:
  enabled: true
  minAvailable: 1

# Security
securityContext:
  capabilities:
    drop: [ALL]
  readOnlyRootFilesystem: true
  runAsGroup: 65532
  runAsNonRoot: true
  runAsUser: 65532